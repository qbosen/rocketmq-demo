# 1. MQ
## 1.1 作用

消息队列就是一个种“先进先出”的数据结构。“微服务”的流行，使得对服务的松耦合要求越来越高，同时服务的联系却越来越紧密，对服务间通信质量的要求越来越高。分布式消息队列可以提供应用解耦、流量消峰、消息分发等功能，成为了大型互联网服务架构的标配中间件。

1. 应用解耦

   多个系统间的调用关系，可以通过发布/订阅模型来解耦，降低系统整体错误率。

2. 流量消峰

   通过中间件的缓存机制，保证系统稳定、系统可用。同时避免为了应对部分业务购置大量服务器资源。

3. 消息分发

   用户画像、精准推送、流程优化等都需要大数据支撑。数据不断产生，下游根据需求订阅不同的消息，实时产生实时计算，数据提供方和消费方互不干扰。

## 1.2 MQ对比

参考: [五种主流MQ对比](http://www.52im.net/thread-2625-1-1.html)

1. RabbitMQ

   Erlang编写、社区最活跃，支持语言最多的消息队列。

   消息堆积支持差、严重影响性能。

   延时低微秒级，每秒处理几万到十几万条消息。

2. RocketMQ

   品学兼优。Java编写、中文资料多、功能完善、容易扩展、有大量场景支撑。

   支持上千的topic、亿级消息堆积。毫秒级延时，数十万级别吞吐，适合互联网项目。

   社区生态、国际支持弱。

3. Kafka

   大数据、流计算领域的老大，生态支持好。

   Scala+java开发，大量使用批量和异步思想，性能极高。数十万级别吞吐，极限能力过千万。

   由于批量发送和批量处理的设计，消息不多时，延时较高。不适合在线业务。

4. 其他梯队
   1. ActiveMQ，老牌开源，社区不活跃。
   2. ZeroMQ，基于消息队列的多线程网络库。
   3. Pulsar，存储与计算分离，下一代MQ。

# 参考

1. [rocketmq spring-boot支持](https://github.com/apache/rocketmq-spring/wiki)
2. [rocketmq 源码、文档、例子](https://github.com/apache/rocketmq)